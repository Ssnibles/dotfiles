# =============================================================================
# HYPRLAND STARTUP CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# Core System Services (Priority 1 - Immediate)
# -----------------------------------------------------------------------------
# Environment setup for systemd and D-Bus
exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment PATH QT_QPA_PLATFORMTHEME WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Authentication agent (required early for elevated permissions)
exec-once = /usr/lib/polkit-kde-authentication-agent-1

# -----------------------------------------------------------------------------
# Desktop Portals (Priority 2 - Early)
# -----------------------------------------------------------------------------
# Start Hyprland portal first, then generic portal with delay
exec-once = /usr/libexec/xdg-desktop-portal-hyprland
exec-once = sleep 2 && /usr/libexec/xdg-desktop-portal

# -----------------------------------------------------------------------------
# Core Desktop Components (Priority 3 - UI Foundation)
# -----------------------------------------------------------------------------
# Wallpaper daemon
exec-once = swww-daemon

# Status bar with proper config paths
exec-once = sleep 1 && waybar -c $HOME/.config/waybar/config.jsonc -s $HOME/.config/waybar/style.css

# Notification daemon
exec-once = sleep 1 && mako --config $HOME/.config/mako/active_theme

# -----------------------------------------------------------------------------
# Input & Accessibility (Priority 4 - User Interaction)
# -----------------------------------------------------------------------------
# Input method framework (uncomment if needed for non-latin scripts)
# exec-once = fcitx5 -d --replace

# Clipboard management
exec-once = sleep 2 && wl-paste --type text --watch cliphist store --trim
exec-once = sleep 2 && wl-paste --type image --watch cliphist store

# -----------------------------------------------------------------------------
# System Utilities (Priority 5 - Background Services)
# -----------------------------------------------------------------------------
# Power management
exec-once = sleep 3 && sudo tlp start

# Network management (uncomment if not using desktop environment's network manager)
# exec-once = sleep 2 && nm-applet --indicator

# Custom services
exec-once = sleep 2 && vicinae server

# -----------------------------------------------------------------------------
# User Applications & Scripts (Priority 6 - Final Setup)
# -----------------------------------------------------------------------------
# Set initial brightness level
exec-once = sleep 1 && brightnessctl set 52000

# Load wallpaper (uncomment and customize)
# exec-once = sleep 3 && swww img $HOME/wallpapers/cherry-blossom-wallpaper.jpg --transition-type fade --transition-duration 2

# Custom scripts
# exec-once = sleep 4 && $HOME/.config/hypr/scripts/waybar_reload.sh
exec-once = sleep 5 && $HOME/.config/hypr/scripts/welcome

# -----------------------------------------------------------------------------
# Maintenance & Cleanup (Priority 7 - Housekeeping)
# -----------------------------------------------------------------------------
# Clean old clipboard entries (uncomment if desired)
# exec-once = sleep 10 && cliphist wipe 15 "*"

# Auto-start applications (uncomment as needed)
# exec-once = sleep 8 && firefox
# exec-once = sleep 10 && discord --start-minimized
# exec-once = sleep 12 && spotify --minimized

# -----------------------------------------------------------------------------
# Optional Services (Commented - Enable as needed)
# -----------------------------------------------------------------------------
# Bluetooth management
# exec-once = sleep 3 && blueman-applet

# Audio system (if not using PipeWire/systemd)
# exec-once = sleep 1 && pipewire &
# exec-once = sleep 1 && pipewire-pulse &
# exec-once = sleep 2 && wireplumber &

# Screen sharing support
# exec-once = sleep 3 && /usr/lib/xdg-desktop-portal-wlr

# Gaming utilities
# exec-once = sleep 5 && gamemoded -d
# exec-once = sleep 5 && steam -silent

# Development tools
# exec-once = sleep 8 && code --no-sandbox

# System monitoring
# exec-once = sleep 10 && conky -d

# -----------------------------------------------------------------------------
# Troubleshooting Commands (Commented - Use for debugging)
# -----------------------------------------------------------------------------
# Check portal status:
# exec-once = sleep 15 && systemctl --user status xdg-desktop-portal-hyprland

# Restart waybar if it fails:
# exec-once = sleep 20 && pkill waybar && sleep 2 && waybar -c $HOME/.config/waybar/config.jsonc -s $HOME/.config/waybar/style.css
